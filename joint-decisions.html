<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Joint Decisions – When AI & Doctors Collide</title>
  <style>
    * {
      font-family: Arial, sans-serif !important;
    }
    body {
      margin: 20px;
      background-color: #f4f6f8;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 20px;
    }
    #app {
      max-width: 700px;
      margin: 0 auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h2 {
      margin-bottom: 15px;
      color: #34495e;
    }
    p {
      margin-bottom: 10px;
      font-size: 16px;
      line-height: 1.5;
    }
    .indent {
      margin-left: 20px;
    }
    input[type="text"], textarea {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      display: inline-block;
      padding: 12px 20px;
      margin: 10px 5px 0 0;
      font-size: 16px;
      background-color: #2c3e50;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #34495e;
    }
    details {
      margin: 10px 0;
      border-radius: 4px;
      background: #fff;
    }
    summary {
      background: #BBF6FC;
      padding: 10px;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
    }
    #summary {
      border: 1px solid #ccc;
      padding: 20px;
      margin-top: 20px;
      background: #f9f9f9;
      border-radius: 8px;
    }
    #summary h3 {
      margin-bottom: 15px;
      color: #2c3e50;
    }
    .download-btn {
      background-color: #27ae60;
    }
    .download-btn:hover {
      background-color: #2ecc71;
    }
    .reflect-title {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 15px;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body>
  <h1>Joint Decisions – When AI & Doctors Collide</h1>
  <div id="app"></div>

  <script>
    let studentName = "";
    let choicesMade = [];
    let writtenResponse = "";

    const scenarios = {
      intro: {
        text: `
          <p>For this week's discussion board, we're going to explore a scenario where you might encounter AI in "real life".</p>
          <br>
          <p>Select the answer that you think makes the most sense for each of the following questions.</p>
          <p class="indent">With each selection, you'll get more information about the scenario.</p>
          <br>
          <p class="indent">And at the end of the scenario, you'll write a quick response to explore why you selected what you did.</p>
          <br>
          <p>After you've answered all the questions, make sure to download a screenshot of the last page.</p>
          <p class="indent">You'll upload this screenshot into the Canvas dropbox for 5 "free" points!</p>
          <br>
          <p>Enter your name, and then dive into the scenario!</p>
        `
      },
      scenarioIntro: {
        text: `
          <p>Suppose you are a 45-year-old female with a family history of autoimmune diseases.</p>
          <br>
          <p>While hiking in Broken Bow State Park (southern Oklahoma), you trip over a rock and twist your right knee.</p>
          <p class="indent">This knee has had low-level pain for months, but now it’s excruciating and swollen.</p>
          <p class="indent">Your friends rush you to the ER at McCurtain County Hospital in Idabel, OK.</p>
          <br>
          <p>After examining you & taking your medical history, the ER doctor suspects rheumatoid arthritis flare-up.</p>
          <p class="indent">However, because the inflammation got significantly worse after you twisted your knee, he says it's possible that you could have a ligament injury.</p>
          <p class="indent">He recommends an MRI to check for signs of a tear.</p>
          <br>
          <p>You're in luck: the hospital's MRI machine is available immediately!</p>
          <p class="indent">But here's the snag: the hospital's one radiologist will not be back in to interpret that MRI until tomorrow morning - over 12 hours from now.</p>
          <br>
          <p>The ER doctor mentions that their hospital has the ability to use AI to interpret scans like MRIs & CTs.</p>
          <p class="indent">AI interpretation of your MRI would take less than 30 minutes.</p>
          <br>
          <p style="font-size:20px; font-weight:bold;">How will you proceed?</p>
        `,
        choices: [
          { text: "Option #1 - Have AI interpret the MRI", next: "aiInterpret" },
          { text: "Option #2 - Wait for the radiologist", next: "waitRadiologist" }
        ]
      },
      waitRadiologist: {
        text: `
          <p>While you may not feel 100% comfortable with AI interpreting your imaging results, check out 
          <a href="https://croucher.org.hk/en/news/ai-model-matches-expert-radiologists-in-knee-mri-analysis" target="_blank">THIS SUMMARY ARTICLE</a> 
          about the accuracy of the CoPAS AI-powered system.</p>
          <br>
          <p>With that article in mind, would you still like to wait for a radiologist?</p>
        `,
        choices: [
          { text: "Option #1 - Yes, I would still like to wait.", next: "reflectWaitRadiologist" },
          { text: "Option #2 - No, I would like AI to interpret the MRI.", next: "aiInterpret" }
        ]
      },
      aiInterpret: {
        text: `
          <p>The results are in!</p>
          <p class="indent">After reviewing your MRI images, AI has concluded that you are having a rheumatoid arthritis flare-up.</p>
          <p class="indent">Based on this diagnosis, AI recommends that you receive an immediate steroid injection.</p>
          <br><br>
          <p>Here's the problem: the ER doctor isn't quite as sure that you should IMMEDIATELY get that injection.</p>
          <p class="indent">"I'm not a radiologist," he says, "but this imaging looks like it's possible that you have septic arthritis.</p>
          <p class="indent">If that's the case, you REALLY shouldn't get that injection!"</p>
          <br>
        `
      },
      reflectWaitRadiologist: {
        text: `
          <div class="reflect-title">Let's Reflect on This!</div>
          <p>You've decided that - in THIS scenario, at least - you'd rather wait 12+ hours for a human radiologist than trust an AI one that can immediately interpret your image.</p>
          <br>
          <p class="indent">What specific factors influenced that choice in this scenario?</p>
          <p class="indent">Can you think of anything that would have changed your mind?</p>
          <br><br>
          <p>There aren't any right or wrong answers for this, but you DO need to add a short reflection to get credit for this part of the scenario!</p>
        `
      },
      shotGiven: {
        text: `
          <div class="reflect-title">Let's Reflect on This!</div>
          <p>You've elected - in THIS scenario - to trust AI's interpretation of your scan over the doctor's interpretation.</p>
          <p class="indent">What specific factors influenced your choice in this scenario?</p>
          <p class="indent">Can you think of anything that would have changed your mind?</p>
          <br>
          <p>There aren't any right or wrong answers for this, but you DO need to add a short reflection to get credit for this part of the scenario!</p>
        `
      },
      shotDelayed: {
        text: `
          <div class="reflect-title">Let's Reflect on This!</div>
          <p>You've elected - in THIS scenario - to trust the doctor's interpretation of your scan over AI's interpretation.</p>
          <p class="indent">What specific factors influenced your choice in this scenario?</p>
          <p class="indent">Can you think of anything that would have changed your mind?</p>
          <br>
          <p>There aren't any right or wrong answers for this, but you DO need to add a short reflection to get credit for this part of the scenario!</p>
        `
      }
    };

    function startScreen() {
      const container = document.getElementById('app');
      container.innerHTML = `
        ${scenarios.intro.text}
        <h2>Enter Your Name</h2>
        <input type="text" id="nameInput" placeholder="Your name" />
        <button onclick="startScenario()">Start Scenario</button>
      `;
    }

    function startScenario() {
      const input = document.getElementById('nameInput').value.trim();
      if (input) {
        studentName = input;
        render(scenarios.scenarioIntro);
      } else {
        alert("Please enter your name.");
      }
    }

    function render(scene) {
      const container = document.getElementById('app');
      container.innerHTML = `<div>${scene.text}</div>`;

      if (scene.choices) {
        scene.choices.forEach(choice => {
          const btn = document.createElement('button');
          btn.textContent = choice.text;
          btn.onclick = () => {
            choicesMade.push(choice.text);
            render(scenarios[choice.next]);
          };
          container.appendChild(btn);
        });
      }

      if (scene === scenarios.aiInterpret) {
        const details1 = document.createElement('details');
        details1.innerHTML = `<summary>What is septic arthritis?</summary>
          <div style="padding:10px;">
            <p>Septic arthritis is a type of joint inflammation caused by a bacterial infection of the joint.</p>
            <p>It causes the same kind of swelling and pain that rheumatoid arthritis does, but in septic arthritis, inflammation is actually GOOD—it means the immune system is attacking pathogens in your joint!</p>
          </div>`;
        container.appendChild(details1);

        const details2 = document.createElement('details');
        details2.innerHTML = `<summary>What happens if you use steroids to treat septic arthritis?</summary>
          <div style="padding:10px;">
            <p>Steroids tell the immune system to STOP mounting a reaction, meaning they will no longer try to eliminate bacteria in your joint.</p>
            <p>If these bacteria are NOT eliminated, the infection may cause bone breakdown and spread to other areas of the body.</p>
          </div>`;
        container.appendChild(details2);

        const details3 = document.createElement('details');
        details3.innerHTML = `<summary>So why would I want a steroid shot?</summary>
          <div style="padding:10px;">
            <p>If you are experiencing a rheumatoid arthritis flare-up (like AI is certain you are), this injection will lead to almost immediate relief from pain as it decreases inflammation and swelling at your knee.</p>
            <p>So, as long as AI is right, that shot is your pathway to relief!</p>
          </div>`;
        container.appendChild(details3);

        const decisionText = document.createElement('p');
        decisionText.style.marginTop = "20px";
        decisionText.textContent = "After considering the information above, what do you want to do?";
        container.appendChild(decisionText);

        const btn1 = document.createElement('button');
        btn1.textContent = "Option #1 - Get the steroid shot";
        btn1.onclick = () => {
          choicesMade.push(btn1.textContent);
          render(scenarios.shotGiven);
        };
        container.appendChild(btn1);

        const btn2 = document.createElement('button');
        btn2.textContent = "Option #2 - Delay the steroid shot";
        btn2.onclick = () => {
          choicesMade.push(btn2.textContent);
          render(scenarios.shotDelayed);
        };
        container.appendChild(btn2);
      }

      if (scene === scenarios.reflectWaitRadiologist || scene === scenarios.shotGiven || scene === scenarios.shotDelayed) {
        const textarea = document.createElement('textarea');
        textarea.placeholder = "Type your response here...";
        container.appendChild(textarea);

        const reconsiderBtn = document.createElement('button');
        reconsiderBtn.textContent = "← Let Me Reconsider That";
        reconsiderBtn.onclick = () => {
          render(scenarios.aiInterpret);
        };
        container.appendChild(reconsiderBtn);

        const submitBtn = document.createElement('button');
        submitBtn.textContent = "Submit";
        submitBtn.onclick = () => {
          writtenResponse = textarea.value.trim();
          if (!writtenResponse) {
            alert("Please enter a response before submitting.");
            return;
          }
          choicesMade.push("Provided written response");
          showSummary();
        };
        container.appendChild(submitBtn);
      }
    }

    function showSummary() {
      const container = document.getElementById('app');
      container.innerHTML = `
        <h3>Summary</h3>
        <div id="summary">
          <p><strong>Name:</strong> ${studentName}</p>
          <p><strong>Your Choices:</strong></p>
          <ul>${choicesMade.map(c => `<li>${c}</li>`).join('')}</ul>
          ${writtenResponse ? `<p><strong>Your Written Response:</strong> ${writtenResponse}</p>` : ""}
        </div>
        <p>Click the "Download Screenshot" button below to save a screenshot of your choices.</p>
        <p class="indent">You'll submit this screenshot for 5 points into the Joint Decisions Scenario Dropbox.</p>
        <button class="download-btn" onclick="downloadScreenshot()">Download Screenshot</button>
      `;
    }

    function downloadScreenshot() {
      const summaryElement = document.getElementById('summary');
      html2canvas(summaryElement).then(canvas => {
        const link = document.createElement('a');
        link.download = 'scenario-summary.png';
        link.href = canvas.toDataURL();
        link.click();
      });
    }

    startScreen();
  </script>
</body>
</html>